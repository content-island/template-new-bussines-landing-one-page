---
import Footer from '#common/components/Footer.astro';
import Header from '#common/components/Header.astro';

import '@fontsource-variable/geologica/index.css';
import '@fontsource-variable/inter/index.css';
import '../css/global.css';

interface Props {
  title?: string;
  description?: string;
}

const { title, description } = Astro.props;
---

<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="stylesheet" href="/src/css/global.css" />
  </head>
  <body class="flex min-h-screen flex-col">
    <Header />
    <main class="flex-1">
      <slot />
    </main>
    <Footer />
  </body>
</html>

<script>
  // Theme toggle logic
  const themeToggle = document.querySelector('.theme-toggle');
  const html = document.documentElement;

  // Check for saved theme preference or default to 'light'
  const currentTheme = localStorage.getItem('theme') || 'light';
  html.setAttribute('data-theme', currentTheme);

  themeToggle?.addEventListener('click', () => {
    const theme = html.getAttribute('data-theme') === 'light' ? 'dark' : 'light';
    html.setAttribute('data-theme', theme);
    localStorage.setItem('theme', theme);
  });

  // Mobile menu toggle
  const menuToggle = document.querySelector('.menu-toggle');
  const navMenu = document.querySelector('.nav__menu');
  const body = document.body;

  menuToggle?.addEventListener('click', () => {
    navMenu?.classList.toggle('nav__menu--active');
    menuToggle?.classList.toggle('menu-toggle--active');
    body.classList.toggle('menu-open');
  });

  // Close menu when clicking on a link
  document.querySelectorAll('.nav__link').forEach(link => {
    link.addEventListener('click', () => {
      navMenu?.classList.remove('nav__menu--active');
      menuToggle?.classList.remove('menu-toggle--active');
      body.classList.remove('menu-open');
    });
  });
</script>
